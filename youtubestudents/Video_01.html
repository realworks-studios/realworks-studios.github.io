<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Centre of Mass and Collision One Shot | NCERT Class 11 Physics Full Chapter Explanation | CBSE 2025</title>
    <link rel="icon" type="image/png" href="youtube favicon.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Roboto', Arial, sans-serif;
        }
        body {
            display: flex;
            min-height: 100vh;
            background-color: #f9f9f9;
        }
        .navbar {
            background: #ffffff;
            color: black;
            padding: 10px 20px;
            display: flex;
            align-items: center;
            font-size: 20px;
            font-weight: bold;
            border-bottom: 1px solid #ddd;
            position: fixed;
            width: 100%;
            top: 0;
            left: 0;
            z-index: 1000;
            height: 56px;
        }
        .menu-icon {
            width: 30px;
            height: 30px;
            margin-right: 15px;
            cursor: pointer;
        }
        .youtube-logo {
            cursor: pointer;
        }
        .youtube-logo img {
            width: 120px;
            height: auto;
        }
        .search-bar {
            flex-grow: 1;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .search-bar input {
            width: 12cm;
            height: 1cm;
            padding: 6px;
            border: 1px solid #ccc;
            border-radius: 20px;
            font-size: 14px;
        }
        .search-bar img {
            width: 25px;
            height: 25px;
            margin-left: 10px;
            cursor: pointer;
        }
        .profile-container {
            position: relative;
            margin-left: 20px;
        }
        .profile-logo {
            width: 40px;
            height: 40px;
            background: #ff0000;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            overflow: hidden;
        }
        .profile-logo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .dropdown-menu {
            display: none;
            position: absolute;
            top: 50px;
            right: 0;
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }
        .dropdown-menu p {
            padding: 10px 20px;
            margin: 0;
            font-size: 16px;
            color: #333;
            cursor: pointer;
        }
        .dropdown-menu p:hover {
            background: #f0f0f0;
        }
        .sidebar {
            width: 250px;
            background: #f9f9f9;
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            padding: 80px 20px 20px;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease-in-out;
        }
        .sidebar.hidden {
            transform: translateX(-100%);
        }
        .sidebar p {
            padding: 10px 15px;
            font-size: 18px;
            cursor: pointer;
            transition: background 0.3s ease;
            display: flex;
            align-items: center;
            line-height: 1;
        }
        .sidebar p img {
            width: 25px;
            height: 25px;
            margin-right: 10px;
            object-fit: cover;
        }
        .sidebar p:hover {
            background: #ddd;
            border-radius: 5px;
        }
        .sidebar p.section-header {
            font-size: 16px;
            font-weight: 600;
            padding: 8px 24px;
            color: #606060;
            line-height: 1;
        }
        .divider {
            height: 1px;
            background: #ccc;
            margin: 5px 0;
        }
        .content {
            margin-left: 270px;
            margin-top: 60px;
            padding: 24px;
            flex-grow: 1;
            transition: margin-left 0.3s ease-in-out;
        }
        .content.sidebar-hidden {
            margin-left: 0;
            width: 100%;
        }
        .video-info {
            max-width: 1280px;
            margin: 0 auto;
        }
        .video-title {
            margin: 8px 0;
            font-size: 24px;
            font-weight: 700;
            line-height: 32px;
        }
        .video-actions {
            margin: 8px 0;
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        .like-dislike-container {
            display: flex;
            align-items: center;
            background-color: #f2f2f2;
            border: 1px solid #e0e0e0;
            border-radius: 20px;
            padding: 0 8px;
        }
        .like-dislike-container button {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 14px;
            color: #030303;
            transition: background-color 0.2s;
        }
        .like-dislike-container button.active {
            background-color: #e0e0ff;
        }
        .like-dislike-container .divider {
            width: 1px;
            height: 24px;
            background-color: #e0e0e0;
            margin: 0 4px;
        }
        .share-button, .add-to-playlist-button, .watch-later-button {
            display: flex;
            align-items: center;
            background-color: #f2f2f2;
            border: 1px solid #e0e0e0;
            border-radius: 20px;
            padding: 8px 16px;
            cursor: pointer;
            font-size: 14px;
            color: #030303;
        }
        .watch-later-button.added {
            background-color: #e0e0e0;
        }
        .share-button img, .add-to-playlist-button img, .watch-later-button img {
            width: 20px;
            height: 20px;
            margin-right: 8px;
        }
        .channel-info {
            display: flex;
            align-items: center;
            margin: 12px 0;
            padding-bottom: 12px;
            border-bottom: 1px solid #e0e0e0;
        }
        .channel-logo {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            margin-right: 16px;
            cursor: pointer;
        }
        .channel-details {
            flex-grow: 1;
        }
        .channel-name {
            font-size: 14px;
            color: #030303;
            font-weight: 500;
        }
        .subscriber-count {
            font-size: 12px;
            color: #606060;
            margin-top: 2px;
        }
        .subscribe-button {
            background-color: red;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            font-weight: bold;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
        }
        .subscribed {
            background-color: grey;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1001;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            width: 400px;
            max-width: 90%;
        }
        .modal-content h3 {
            margin-bottom: 15px;
        }
        .modal-content .close {
            float: right;
            font-size: 24px;
            cursor: pointer;
        }
        .playlist-item {
            display: flex;
            align-items: center;
            padding: 10px;
            cursor: pointer;
            border-bottom: 1px solid #e0e0e0;
        }
        .playlist-item:hover {
            background-color: #f0f0f0;
        }
        .create-playlist {
            display: flex;
            align-items: center;
            padding: 10px;
            cursor: pointer;
            color: blue;
        }
        .create-playlist:hover {
            background-color: #f0f0f0;
        }
        .create-playlist-form {
            display: none;
            margin-top: 15px;
        }
        .create-playlist-form input {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .create-playlist-form button {
            background-color: #065fd4;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
        }
        .create-playlist-form button:hover {
            background-color: #054bb4;
        }
        .comments-section {
            margin-top: 20px;
            padding: 15px;
            background: white;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .comments-section h3 {
            font-size: 18px;
            margin-bottom: 15px;
        }
        .comment-form {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        .comment-form input {
            flex-grow: 1;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 5px;
            margin-right: 10px;
        }
        .comment-form button {
            background-color: #065fd4;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
        }
        .comment-form button:hover {
            background-color: #054bb4;
        }
        .comment {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
        }
        .comment .user-logo {
            width: 40px;
            height: 40px;
            background: #ff0000;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: bold;
            margin-right: 10px;
            overflow: hidden;
        }
        .comment .user-logo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .comment-content {
            flex-grow: 1;
        }
        .comment-author {
            font-weight: bold;
            font-size: 14px;
        }
        .comment-text {
            font-size: 14px;
            color: #333;
            margin-top: 2px;
        }
        .comment-actions {
            margin-top: 5px;
            display: flex;
            gap: 10px;
        }
        .comment-actions .like-dislike-container {
            display: flex;
            align-items: center;
            background-color: #f2f2f2;
            border: 1px solid #e0e0e0;
            border-radius: 20px;
            padding: 0 8px;
        }
        .comment-actions .like-dislike-container button {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 14px;
            color: #030303;
            transition: background-color 0.2s;
        }
        .comment-actions .like-dislike-container button.active {
            background-color: #e0e0ff;
        }
        .comment-actions .like-dislike-container .divider {
            width: 1px;
            height: 24px;
            background-color: #e0e0e0;
            margin: 0 4px;
        }
        .comment-actions button {
            background: none;
            border: none;
            color: #606060;
            cursor: pointer;
            font-size: 12px;
        }
        .edit-form {
            display: none;
            margin-top: 10px;
        }
        .edit-form input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        .edit-form button {
            background-color: #065fd4;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
        }
        .edit-form button:hover {
            background-color: #054bb4;
        }
    </style>
</head>
<body>
    <div class="navbar">
        <img class="menu-icon" src="https://upload.wikimedia.org/wikipedia/commons/b/b2/Hamburger_icon.svg" alt="Menu Icon" onclick="toggleSidebar()">
        <a href="Homepage.html">
            <div class="youtube-logo">
                <img src="https://upload.wikimedia.org/wikipedia/commons/b/b8/YouTube_Logo_2017.svg" alt="YouTube Logo">
            </div>
        </a>
        <div class="search-bar">
            <input type="text" placeholder="Search..." id="searchInput">
            <img src="https://upload.wikimedia.org/wikipedia/commons/5/55/Magnifying_glass_icon.svg" alt="Search Icon" onclick="searchVideos()">
        </div>
        <div class="profile-container">
            <div class="profile-logo" id="profileLogo" onclick="toggleDropdown()"></div>
            <div class="dropdown-menu" id="dropdownMenu">
                <p onclick="goToProfile()">Profile</p>
                <p onclick="logout()">Logout</p>
            </div>
        </div>
    </div>

    <div class="sidebar" id="sidebar">
        <p onclick="redirectToHome()">
            <img src="https://upload.wikimedia.org/wikipedia/commons/0/06/Home_mpk.png" alt="Home"> Home
        </p>
        <p><a href="Subscriptions.html" style="text-decoration: none; color: inherit; display: flex; align-items: center;"><img src="subscription.png" alt="Subscriptions"> Subscriptions</a></p>
        <div class="divider"></div>
        <p class="section-header">You ‚ñ∫</p>
        <p><a href="History.html" style="text-decoration: none; color: inherit; display: flex; align-items: center;"><img src="History.png" alt="History"> History</a></p>
        <p><a href="Playlists.html" style="text-decoration: none; color: inherit; display: flex; align-items: center;"><img src="Playlist.png" alt="Playlists"> Playlists</a></p>
        <p><a href="WatchLater.html" style="text-decoration: none; color: inherit; display: flex; align-items: center;"><img src="Watch Later.png" alt="Watch Later"> Watch Later</a></p>
    </div>

    <div class="video-container content">
        <div class="video-info">
            <video width="100%" controls style="max-width: 1280px; aspect-ratio: 16/9;">
                <source src="Video 1.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <div class="video-title">Centre of Mass and Collision One Shot | NCERT Class 11 Physics Full Chapter Explanation | CBSE 2025</div>
            <div class="video-actions">
                <div class="like-dislike-container">
                    <button id="like-button" onclick="toggleLike()">üëç <span id="like-counter">0</span></button>
                    <div class="divider"></div>
                    <button id="dislike-button" onclick="toggleDislike()">üëé</button>
                </div>
                <button class="share-button" onclick="copyLink()">
                    <img src="Share.png" alt="Share Icon"> Share
                </button>
                <button class="add-to-playlist-button" onclick="openPlaylistModal()">
                    <img src="Playlist.png" alt="Playlist Icon"> Add to Playlist
                </button>
                <button class="watch-later-button" id="watchLaterBtn" onclick="toggleWatchLater()">
                    <img src="Watch Later.png" alt="Watch Later Icon"> <span id="watchLaterText">Add to Watch Later</span>
                </button>
            </div>
            <div class="channel-info">
                <img class="channel-logo" src="Channel 1 Logo.png" alt="Channel Logo" onclick="window.location.href='channel.html'">
                <div class="channel-details">
                    <div class="channel-name">Next Toppers - 11th Science</div>
                    <div class="subscriber-count">100,000 subscribers</div>
                </div>
                <button class="subscribe-button" id="subscribe-btn" onclick="toggleSubscribe()">Subscribe</button>
            </div>
            <div class="comments-section" id="commentsSection">
                <h3>Comments</h3>
                <div class="comment-form">
                    <input type="text" id="commentInput" placeholder="Add a comment...">
                    <button onclick="addComment()">Post</button>
                </div>
                <div id="commentsList"></div>
            </div>
        </div>
    </div>

    <div id="playlistModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closePlaylistModal()">√ó</span>
            <h3>Add to Playlist</h3>
            <div id="playlistsList"></div>
            <div class="create-playlist" onclick="showCreatePlaylistForm()">
                + Create New Playlist
            </div>
            <div class="create-playlist-form" id="createPlaylistForm">
                <input type="text" id="newPlaylistName" placeholder="Enter playlist name">
                <button onclick="createPlaylist()">Create</button>
            </div>
        </div>
    </div>

    <script>
    const initialSubscriberCount = 100000;
    const channelInfo = {
        name: "Next Toppers - 11th Science",
        logo: "Channel 1 Logo.png",
        link: "channel.html"
    };
    const videoInfo = {
        thumbnailUrl: "Video 1.png",
        videoTitle: "Centre of Mass and Collision One Shot | NCERT Class 11 Physics Full Chapter Explanation | CBSE 2025",
        videoLink: "Video 1.html"
    };
    let videoState = JSON.parse(localStorage.getItem('videoStateVideo1')) || {
        likeCount: 0,
        isLiked: false,
        isDisliked: false
    };

    function toggleSidebar() {
        let sidebar = document.querySelector(".sidebar");
        let content = document.querySelector(".content");
        sidebar.classList.toggle("hidden");
        content.classList.toggle("sidebar-hidden");
    }

    function redirectToHome() {
        window.location.href = 'Homepage.html';
    }

    function toggleLike() {
        const likeButton = document.getElementById("like-button");
        const dislikeButton = document.getElementById("dislike-button");
        const likeCounter = document.getElementById("like-counter");

        if (videoState.isLiked) {
            videoState.likeCount--;
            videoState.isLiked = false;
            likeButton.classList.remove("active");
        } else {
            videoState.likeCount++;
            videoState.isLiked = true;
            likeButton.classList.add("active");
            if (videoState.isDisliked) {
                videoState.isDisliked = false;
                dislikeButton.classList.remove("active");
            }
        }

        likeCounter.textContent = videoState.likeCount;
        localStorage.setItem('videoStateVideo1', JSON.stringify(videoState));
    }

    function toggleDislike() {
        const likeButton = document.getElementById("like-button");
        const dislikeButton = document.getElementById("dislike-button");
        const likeCounter = document.getElementById("like-counter");

        if (videoState.isDisliked) {
            videoState.isDisliked = false;
            dislikeButton.classList.remove("active");
        } else {
            videoState.isDisliked = true;
            dislikeButton.classList.add("active");
            if (videoState.isLiked) {
                videoState.likeCount--;
                videoState.isLiked = false;
                likeButton.classList.remove("active");
                likeCounter.textContent = videoState.likeCount;
            }
        }

        localStorage.setItem('videoStateVideo1', JSON.stringify(videoState));
    }

    function copyLink() {
        navigator.clipboard.writeText(window.location.href);
        alert('Link copied to clipboard!');
    }

    function addToHistory(thumbnailUrl, videoTitle, videoLink) {
        let history = JSON.parse(localStorage.getItem('videoHistory')) || [];
        const videoExists = history.some(item => item.thumbnailUrl === thumbnailUrl);
        if (!videoExists) {
            history.push({ thumbnailUrl, videoTitle, videoLink });
            localStorage.setItem('videoHistory', JSON.stringify(history));
        }
    }

    function toggleSubscribe() {
        var btn = document.getElementById("subscribe-btn");
        var subscriberCountElement = document.querySelector(".subscriber-count");
        var currentCount = parseInt(localStorage.getItem('subscriberCount')) || initialSubscriberCount;
        var isSubscribed = localStorage.getItem('isSubscribed') === 'true';

        let subscriptions = JSON.parse(localStorage.getItem('subscriptions')) || [];

        if (isSubscribed) {
            btn.classList.remove("subscribed");
            btn.style.backgroundColor = "red";
            btn.innerHTML = "Subscribe";
            currentCount = initialSubscriberCount;
            localStorage.setItem('isSubscribed', 'false');
            subscriptions = subscriptions.filter(sub => sub.name !== channelInfo.name);
        } else {
            btn.classList.add("subscribed");
            btn.style.backgroundColor = "grey";
            btn.innerHTML = "Subscribed";
            currentCount = initialSubscriberCount + 1;
            localStorage.setItem('isSubscribed', 'true');
            if (!subscriptions.some(sub => sub.name === channelInfo.name)) {
                subscriptions.push(channelInfo);
            }
        }

        localStorage.setItem('subscriberCount', currentCount);
        localStorage.setItem('subscriptions', JSON.stringify(subscriptions));
        subscriberCountElement.textContent = `${currentCount.toLocaleString()} subscribers`;
    }

    function toggleWatchLater() {
        let watchLaterList = JSON.parse(localStorage.getItem('watchLater')) || [];
        const watchLaterBtn = document.getElementById("watchLaterBtn");
        const watchLaterText = document.getElementById("watchLaterText");
        const videoExists = watchLaterList.some(video => video.videoLink === videoInfo.videoLink);

        if (videoExists) {
            watchLaterList = watchLaterList.filter(video => video.videoLink !== videoInfo.videoLink);
            watchLaterBtn.classList.remove("added");
            watchLaterText.innerText = "Add to Watch Later";
            alert('Removed from Watch Later!');
        } else {
            watchLaterList.push(videoInfo);
            watchLaterBtn.classList.add("added");
            watchLaterText.innerText = "Remove from Watch Later";
            alert('Added to Watch Later!');
        }

        localStorage.setItem('watchLater', JSON.stringify(watchLaterList));
    }

    function openPlaylistModal() {
        const modal = document.getElementById("playlistModal");
        const playlistsList = document.getElementById("playlistsList");
        const playlists = JSON.parse(localStorage.getItem('playlists')) || [];

        playlistsList.innerHTML = '';

        playlists.forEach(playlist => {
            const playlistItem = document.createElement('div');
            playlistItem.className = 'playlist-item';
            playlistItem.innerText = playlist.name;
            playlistItem.onclick = () => addToPlaylist(playlist.name);
            playlistsList.appendChild(playlistItem);
        });

        modal.style.display = 'flex';
    }

    function closePlaylistModal() {
        const modal = document.getElementById("playlistModal");
        const createForm = document.getElementById("createPlaylistForm");
        createForm.style.display = 'none';
        modal.style.display = 'none';
    }

    function showCreatePlaylistForm() {
        const createForm = document.getElementById("createPlaylistForm");
        createForm.style.display = 'block';
    }

    function createPlaylist() {
        const playlistNameInput = document.getElementById("newPlaylistName");
        const playlistName = playlistNameInput.value.trim();

        if (playlistName === '') {
            alert('Please enter a playlist name.');
            return;
        }

        let playlists = JSON.parse(localStorage.getItem('playlists')) || [];
        const playlistExists = playlists.some(playlist => playlist.name === playlistName);

        if (playlistExists) {
            alert('A playlist with this name already exists.');
            return;
        }

        playlists.push({ name: playlistName, videos: [] });
        localStorage.setItem('playlists', JSON.stringify(playlists));
        addToPlaylist(playlistName);
        playlistNameInput.value = '';
        closePlaylistModal();
    }

    function addToPlaylist(playlistName) {
        let playlists = JSON.parse(localStorage.getItem('playlists')) || [];
        const playlist = playlists.find(p => p.name === playlistName);

        if (playlist) {
            const videoExists = playlist.videos.some(video => video.videoLink === videoInfo.videoLink);
            if (!videoExists) {
                playlist.videos.push(videoInfo);
                localStorage.setItem('playlists', JSON.stringify(playlists));
                alert(`Video added to ${playlistName}!`);
            } else {
                alert('Video is already in this playlist.');
            }
        }

        closePlaylistModal();
    }

    function addComment() {
        const commentInput = document.getElementById('commentInput');
        const commentText = commentInput.value.trim();
        const currentUser = localStorage.getItem("currentUser");

        if (commentText === '') {
            alert('Please enter a comment.');
            return;
        }

        if (!currentUser) {
            alert('Please log in to comment.');
            return;
        }

        const commentsList = document.getElementById('commentsList');
        const commentId = Date.now();
        const comment = {
            id: commentId,
            text: commentText,
            likes: 0,
            dislikes: 0,
            isLiked: false,
            isDisliked: false,
            userEmail: currentUser
        };

        let comments = JSON.parse(localStorage.getItem('commentsVideo1')) || [];
        comments.push(comment);
        localStorage.setItem('commentsVideo1', JSON.stringify(comments));

        renderComment(comment);
        commentInput.value = '';
    }

    function renderComment(comment) {
        const commentsList = document.getElementById('commentsList');
        const commentDiv = document.createElement('div');
        commentDiv.className = 'comment';
        commentDiv.setAttribute('data-id', comment.id);

        const users = JSON.parse(localStorage.getItem("users")) || {};
        const user = users[comment.userEmail] || {};
        const firstLetter = user.name ? user.name.charAt(0).toUpperCase() : comment.userEmail.charAt(0).toUpperCase();
        const isCurrentUser = comment.userEmail === localStorage.getItem("currentUser");

        let userLogoContent = `<div class="user-logo">${firstLetter}</div>`;
        if (user.profilePic) {
            userLogoContent = `<div class="user-logo"><img src="${user.profilePic}" alt="${user.name || comment.userEmail}"></div>`;
        }

        commentDiv.innerHTML = `
            ${userLogoContent}
            <div class="comment-content">
                <div class="comment-author">${user.name || comment.userEmail}</div>
                <div class="comment-text">${comment.text}</div>
                <div class="comment-actions">
                    <div class="like-dislike-container">
                        <button onclick="toggleCommentLike(${comment.id})">üëç <span class="like-count">${comment.likes}</span></button>
                        <div class="divider"></div>
                        <button onclick="toggleCommentDislike(${comment.id})">üëé <span class="dislike-count">${comment.dislikes}</span></button>
                    </div>
                    ${isCurrentUser ? `
                        <button onclick="editComment(${comment.id})">Edit</button>
                        <button onclick="deleteComment(${comment.id})">Delete</button>
                    ` : ''}
                </div>
                <div class="edit-form" id="editForm-${comment.id}">
                    <input type="text" id="editInput-${comment.id}" value="${comment.text}">
                    <button onclick="saveEdit(${comment.id})">Save</button>
                </div>
            </div>
        `;

        const likeButton = commentDiv.querySelector('.comment-actions button:first-child');
        const dislikeButton = commentDiv.querySelector('.comment-actions button:nth-child(2)');
        if (comment.isLiked) likeButton.classList.add('active');
        if (comment.isDisliked) dislikeButton.classList.add('active');

        commentsList.prepend(commentDiv);
    }

    function toggleCommentLike(commentId) {
        let comments = JSON.parse(localStorage.getItem('commentsVideo1')) || [];
        const comment = comments.find(c => c.id === commentId);
        const commentDiv = document.querySelector(`.comment[data-id="${commentId}"]`);
        const likeButton = commentDiv.querySelector('.comment-actions button:first-child');
        const likeCountSpan = commentDiv.querySelector('.like-count');

        if (comment.isLiked) {
            comment.likes--;
            comment.isLiked = false;
            likeButton.classList.remove('active');
        } else {
            comment.likes++;
            comment.isLiked = true;
            likeButton.classList.add('active');
            if (comment.isDisliked) {
                comment.dislikes--;
                comment.isDisliked = false;
                const dislikeButton = commentDiv.querySelector('.comment-actions button:nth-child(2)');
                dislikeButton.classList.remove('active');
                const dislikeCountSpan = commentDiv.querySelector('.dislike-count');
                dislikeCountSpan.textContent = comment.dislikes;
            }
        }

        likeCountSpan.textContent = comment.likes;
        localStorage.setItem('commentsVideo1', JSON.stringify(comments));
    }

    function toggleCommentDislike(commentId) {
        let comments = JSON.parse(localStorage.getItem('commentsVideo1')) || [];
        const comment = comments.find(c => c.id === commentId);
        const commentDiv = document.querySelector(`.comment[data-id="${commentId}"]`);
        const dislikeButton = commentDiv.querySelector('.comment-actions button:nth-child(2)');
        const dislikeCountSpan = commentDiv.querySelector('.dislike-count');

        if (comment.isDisliked) {
            comment.dislikes--;
            comment.isDisliked = false;
            dislikeButton.classList.remove('active');
        } else {
            comment.dislikes++;
            comment.isDisliked = true;
            dislikeButton.classList.add('active');
            if (comment.isLiked) {
                comment.likes--;
                comment.isLiked = false;
                const likeButton = commentDiv.querySelector('.comment-actions button:first-child');
                likeButton.classList.remove('active');
                const likeCountSpan = commentDiv.querySelector('.like-count');
                likeCountSpan.textContent = comment.likes;
            }
        }

        dislikeCountSpan.textContent = comment.dislikes;
        localStorage.setItem('commentsVideo1', JSON.stringify(comments));
    }

    function editComment(commentId) {
        const editForm = document.getElementById(`editForm-${commentId}`);
        editForm.style.display = 'block';
    }

    function saveEdit(commentId) {
        const editInput = document.getElementById(`editInput-${commentId}`);
        const newText = editInput.value.trim();
        if (newText === '') {
            alert('Comment cannot be empty.');
            return;
        }

        let comments = JSON.parse(localStorage.getItem('commentsVideo1')) || [];
        const comment = comments.find(c => c.id === commentId);
        comment.text = newText;

        localStorage.setItem('commentsVideo1', JSON.stringify(comments));
        document.querySelector(`.comment[data-id="${commentId}"] .comment-text`).textContent = newText;
        document.getElementById(`editForm-${commentId}`).style.display = 'none';
    }

    function deleteComment(commentId) {
        if (!confirm('Are you sure you want to delete this comment?')) return;

        let comments = JSON.parse(localStorage.getItem('commentsVideo1')) || [];
        comments = comments.filter(c => c.id !== commentId);
        localStorage.setItem('commentsVideo1', JSON.stringify(comments));

        const commentDiv = document.querySelector(`.comment[data-id="${commentId}"]`);
        commentDiv.remove();
    }

    function loadComments() {
        const comments = JSON.parse(localStorage.getItem('commentsVideo1')) || [];
        comments.forEach(comment => renderComment(comment));
    }

    function searchVideos() {
        const searchInput = document.getElementById("searchInput").value.trim();
        if (searchInput) {
            localStorage.setItem('searchQuery', searchInput);
            window.location.href = `Homepage.html?query=${encodeURIComponent(searchInput)}`;
        }
    }

    window.onload = function() {
        const currentUser = localStorage.getItem("currentUser");
        const profileLogo = document.getElementById("profileLogo");
        if (currentUser) {
            const users = JSON.parse(localStorage.getItem("users")) || {};
            const user = users[currentUser];
            if (user) {
                if (user.profilePic) {
                    const img = document.createElement("img");
                    img.src = user.profilePic;
                    img.style.width = "100%";
                    img.style.height = "100%";
                    img.style.borderRadius = "50%";
                    img.style.objectFit = "cover";
                    profileLogo.innerHTML = "";
                    profileLogo.appendChild(img);
                } else {
                    const firstLetter = user.name.charAt(0).toUpperCase();
                    profileLogo.textContent = firstLetter;
                }
            } else {
                profileLogo.textContent = "?"; 
            }
        } else {
            profileLogo.textContent = "?"; 
        }

        var btn = document.getElementById("subscribe-btn");
        var subscriberCountElement = document.querySelector(".subscriber-count");
        var isSubscribed = localStorage.getItem('isSubscribed') === 'true';
        var currentCount = parseInt(localStorage.getItem('subscriberCount')) || initialSubscriberCount;

        if (isSubscribed) {
            btn.classList.add("subscribed");
            btn.style.backgroundColor = "grey";
            btn.innerHTML = "Subscribed";
        } else {
            btn.classList.remove("subscribed");
            btn.style.backgroundColor = "red";
            btn.innerHTML = "Subscribe";
        }

        subscriberCountElement.textContent = `${currentCount.toLocaleString()} subscribers`;

        addToHistory(videoInfo.thumbnailUrl, videoInfo.videoTitle, videoInfo.videoLink);

        const watchLaterList = JSON.parse(localStorage.getItem('watchLater')) || [];
        const watchLaterBtn = document.getElementById("watchLaterBtn");
        const watchLaterText = document.getElementById("watchLaterText");
        const videoExists = watchLaterList.some(video => video.videoLink === videoInfo.videoLink);

        if (videoExists) {
            watchLaterBtn.classList.add("added");
            watchLaterText.innerText = "Remove from Watch Later";
        } else {
            watchLaterBtn.classList.remove("added");
            watchLaterText.innerText = "Add to Watch Later";
        }

        const likeButton = document.getElementById("like-button");
        const dislikeButton = document.getElementById("dislike-button");
        const likeCounter = document.getElementById("like-counter");
        likeCounter.textContent = videoState.likeCount;
        if (videoState.isLiked) likeButton.classList.add("active");
        if (videoState.isDisliked) dislikeButton.classList.add("active");

        loadComments();
    };

    function toggleDropdown() {
        const dropdown = document.getElementById("dropdownMenu");
        dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
    }

    function goToProfile() {
        window.location.href = "Profile.html";
    }

    function logout() {
        localStorage.removeItem("currentUser");
        window.location.href = "Log In.html";
    }

    document.addEventListener("click", function(event) {
        const profileContainer = document.querySelector(".profile-container");
        const dropdown = document.getElementById("dropdownMenu");
        if (!profileContainer.contains(event.target)) {
            dropdown.style.display = "none";
        }
    });

    document.getElementById("searchInput").addEventListener("keypress", function(event) {
        if (event.key === "Enter") {
            searchVideos();
        }
    });

    window.onclick = function(event) {
        const modal = document.getElementById("playlistModal");
        if (event.target === modal) {
            closePlaylistModal();
        }
    };
    </script>
</body>
</html>